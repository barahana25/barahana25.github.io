<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>GeoAR.js demo</title>

  <!-- A-Frame & AR.js -->
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-look-at-component@1.0.0/dist/aframe-look-at-component.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>

  <style>
    /* 좌표 표시창 */
    #gpsInfo{
      position:fixed;left:50%;bottom:.7rem;transform:translateX(-50%);
      padding:.3rem .6rem;border-radius:6px;
      background:rgba(0,0,0,.55);color:#fff;font:700 0.9rem/1 monospace;
      z-index:9999
    }
  </style>
</head>

<body style="margin:0;overflow:hidden;">
  <!-- ↓ 좌표 오버레이 -->
  <div id="gpsInfo">위치 확인 중…</div>

  <a-scene
      vr-mode-ui="enabled:false"
      arjs="sourceType:webcam; videoTexture:true; debugUIEnabled:false">

    <a-box
        material="color:red"
        scale="15 15 15"
        position="0 0 0"
        look-at="[gps-camera]"
        gps-entity-place="latitude:36.3552; longitude:128.7025">
    </a-box>

    <!-- 시뮬레이션 좌표 -->
    <a-camera gps-camera="simulateLatitude:36.3552; simulateLongitude:128.7025;"
              rotation-reader>
    </a-camera>
  </a-scene>

  <script>
    // gps-camera 위치 변화 → 오버레이 갱신
    const cam   = document.querySelector('[gps-camera]');
    const label = document.getElementById('gpsInfo');

    cam.addEventListener('gps-camera-update-position', e => {         // 이벤트 이름 고정
      const { latitude, longitude, accuracy } = e.detail.position;     // lat/lon/accuracy 값 얻기
      label.textContent =
        `lat ${latitude.toFixed(6)}  lng ${longitude.toFixed(6)}  ±${Math.round(accuracy)} m`;
    });
  </script>
</body>
</html>
